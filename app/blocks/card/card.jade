include ../title/title
include ../phone/phone
include ../action/action
include ../gallery/gallery

mixin card(data)
	-var item = data[0];
	+b.card&attributes(attributes)
		+e.head
			+title(1) Продажа #{item.name} в Москве
		+e.meta
			+e.meta-id
				+e.meta-lbl Номер объявления:
				+e.meta-row № #{item.id}
				+e.meta-row 
					+e.SPAN.meta-date #{item.pubdate}
					+e.SPAN.meta-view #{item.inspect.viewAll} 
					+e.SPAN.meta-remark (#{item.inspect.viewToday} сегодня)
			+e.meta-inspect
				+e.meta-lbl Адрес осмотра:
				+e.meta-row #{item.inspect.city}, #{item.inspect.adress}
				+e.meta-row 5 автомобилей в наличии
			+e.meta-seller
				+e.meta-lbl Продавец:
				+e.meta-row #{item.author} 
					+e.SPAN.meta-remark (#{item.authorStatus})
				+e.meta-row
					+phone(item.contact).card__meta-phone
			+e.meta-price
				+e.meta-price-value
					| #{item.price} 
					+e.SPAN.meta-price-currency ₽

		+e.ads
			img(src="assets/images/card-ads.jpg", alt="")

		+e.body
			+e.body-row
				+e.DL.feature
					+e.feature-row
						+e.DT.feature-term Год выпуска
						+e.DD.feature-desc #{item.feature.year}
					+e.feature-row
						+e.DT.feature-term Пробег
						+e.DD.feature-desc #{item.feature.mileage}
					+e.feature-row
						+e.DT.feature-term Кузов
						+e.DD.feature-desc #{item.feature.body}
					+e.feature-row
						+e.DT.feature-term Цвет
						+e.DD.feature-desc #{item.feature.color}
					+e.feature-row
						+e.DT.feature-term Двигатель
						+e.DD.feature-desc #{item.feature.engineCapacity} л / #{item.feature.enginePower} л.с. / #{item.feature.engineType}
					+e.feature-row
						+e.DT.feature-term Коробка
						if item.feature.transmission == 'АТ'
							-var transmission = 'автоматическая';
						else
							-var transmission = 'механическая';

						+e.DD.feature-desc #{transmission}
					+e.feature-row
						+e.DT.feature-term Привод
						+e.DD.feature-desc #{item.feature.drive}
					+e.feature-row
						+e.DT.feature-term Руль
						-var drive = item.feature.rightDrive ? 'правый' : 'левый';
						+e.DD.feature-desc #{drive}
					+e.feature-row
						+e.DT.feature-term Состояние
						+e.DD.feature-desc #{item.feature.state}
					+e.feature-row
						+e.DT.feature-term Владельцы
						+e.DD.feature-desc #{item.feature.owners}
					+e.feature-row
						+e.DT.feature-term ПТС
						+e.DD.feature-desc #{item.feature.pts}
					+e.feature-row
						+e.DT.feature-term Владение
						+e.DD.feature-desc #{item.feature.tenure}
					+e.feature-row
						+e.DT.feature-term Таможня
						-var cleared = item.feature.cleared ? 'растаможен' : 'не растаможен';
						+e.DD.feature-desc #{cleared}
				+e.gallery
					+e.gallery-list
						each img in item.gallery
							img(src=img, alt="")
